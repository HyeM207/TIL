# 📌 RDBMS& NoSQL

RDBMS :  릴레이션, 테이블 등

NoSQL : 테이블 구조 x

[ 종류 ] 

- 키, value 형태
- document
- graph
- column store

<br>

---

# 📌 AWS RDS

> RDMS
> 

직접 시스템 로그인 불가능

rds는 serverless 아님

db 인스턴스는 클라우드에서 실행되는 격리된 데이터 베이스 환경 

rds 내부적으로 main인 primary와 standby로 구성됨

- 내부적으로 instance가 있고, 데이터를 저장하는 ebs로 구성됨

## #️⃣ 실습

### ✅ 생성하기 

1. rds 검색 > 데이터베이스 생성
2. 표준 생성 , 엔진 옵션
    - oracle과 sql server는 라이센스 비 나감. 나머지는 오픈소스
    - 버전 알아서 선택 (mysql)
3. 템플릿 (엔진 종류)
    1. 사용목적에 따라 선택 (간단하게 하려면 3번째 선택) 
4. 식별자는 이름과, 자격증명 admin + 암호까지
5. 인스턴스 구성은 프리티어라서 맨 마지막꺼만 선택가능
    - 사양 낮은 거로
6. 스토리지 
    - 테스트만 할것이기에 100으로 설정
7. 연결
    1. ec2 연결 여부
    2. vpc 연결 
    3. 서브넷 그룹 (디폴트)
    4. 퍼플릭 액세스 
        1. 외부에서 접속할거면 예를 누르기
    5. vpc 보안 그룹 은 선정된것으로 
8. 인증 방식
    1. 암호방식
9. 생성하기 버튼 누르기

### ✅ 페이지  

- rds를 이용하면 기본적으로 백업(**스냅샷**)해줌
    - 수동 스냅샷도 있음
    - 좋은 기능
- **파라미터 그룹**
    - db에서 기본 적인 셋팅 (timezone등)
- 데이터베이스 선택 후 설정에서 ‘특정시점으로 복원’ 기능이 있어 장애시 복구 가능함

### ✅ 실습 기타  

- 엔드포인트로 접속함
- 보안그룹  : 인바운드 3306으로 해야 jdbc 연결 가능 + 모든 아이피가 접근가능하게 0.0.0.0으로 설정하면 됨

### ✅ 연결
- mysql workbench로 연결
    - hostname
    - 별칭
    - port
    - username
    - pw입력
- public 설정이라 바로 workbench연결 가능한데, private이면 public인 ec2를 통해서 접속함  +추가 ssl설정도 해줘야한다고 함

<br><br> 

---

# 📌 AWS Document DB

> NoSQL의 Document 형식
> 

MongoDB API와 연계되며, 완전 관리 및 유연한 확장 가능한 문서 전용 데이터 베이스
- 대용량 : 읽기 전용 복제본을 몇분 내에 최대 15까지 추가함
- 가용성  : 6개의 복사본을 3개의 AWS 가용 영역(AZ)에 복제.
- JSON 데이터 저장
- 유연한 인덱싱 제공

### ✅ MongoDB

- 오픈소스 document database (많이 쓰임)
- 데이터 중복 발생할 수 있지만, 접근성, 가시성 굳
- 스키마 설계가 어렵지만, 스키마 유연해서 Application 요구사항에 맞게 **데이터 수용 가능**
- 분산 솔루션을 지원으로 **Scale-out** 쉬움
- 확장시 **.Application 변경 안해도됨**


### ✅  RDBMS와 용어 비교

| RDBMS | MongoDB |
| --- | --- |
| cluster | cluset |
| database | database |
| table | collection |
| row | document |
| column | field |

<br>

## 실습

### ✅  생성하기

1. 검색 > 데이터 베이스 생성
2. 구성 
    1. 클러스터 식별자 (이름 작성)
    2. 버전
    3. 용량
    4. 인스턴스 개수
3. 인증
    1. 이름
    2. 암호
4. 클러스터 생성

<br>

---

# 📌 Dynamo DB

완전 관리형 key-value 기반 NoSQL 데이터베이스 서비스
- **Auto Scaling**
    - 데이터가 쌓일 수록 알아서 용량이 커짐
- 암호화 제공
- 요청 트래픽 처리할 수 있는 데이터베이스 테이블 생성 가능
- console을 통해 모니터링 가능
- 테이블 생성시 스키마 설계 필요 없음

### ✅ 용어

- row는 items라고 함
- 각각의 partitionkey와 sortkey로 구성됨

<br>

## #️⃣ 실습

### ✅ 생성하기

1. 검색 후 테이블 생성
2. 테이블 세부 정보
    1. 테이블 이름
    2. 파티션 키
    3. 정렬 키 
3. 테이블 설정 
    1. 기본 설정 or 설정 사용자 지정
    2. 기본 테이블 설정
4. 테이블 생성

### ✅ 살펴보기

- **항목 생성으로** 값 추가 가능함
    - 보통 코드로 작업을 하고, **lambda**를 통해서 dynamodb에 저장할 수 있도록 함
- 조회 :
    - 스캔 : 파티션으로 검색
    - 쿼리 : 다양한 옵션으로 검색

<br>  <br>      

---

# 📌 DocumentDB vs DynamoDB 비교

|  | Dynamo DB |  Document DB |
| --- | --- | --- |
| 리전 | 모든 리전 | 오하이오, 버지니아등 특정 리전만 가능 |
| 자격증명 | IAM 통해서 DB 액세스 제어함 | DB에서 User를 생성하고 관리함 (AWS가 관여하지 않음) |
| 금액 | 최소 월 1$ <br> 서버리스 서비스로 사용량에 따라 요금 책정 <br> 프리티어 사용 | 최소 월 200$ <br>노드 또는 EC2 인스턴스당 비용 지불 |
| 백업 | 매일 백업 사용 불가하며 사용자가 백업 진행. | DB자체에서 일일 백업을 관리하고 필요할 대마다 복구 가능 <br>모든 유형의 백업 지원됨 |
| 형태 | key-values vs document | documents |
| 확장 | 하이퍼 스케일 | 쉬운 확장 (최대 64TB) |
| 값 크기 | 최대 400KB 아이템(item)크기 | 최대 16MB 문서(Document) zmrl |
| 특징 | 글로벌 테이블과 같은 차별화된 기능 | MongoDB API호환, 손쉬운 마이그레이션  |