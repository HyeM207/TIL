# 11.1 쿼리 작성과 연관된 시스템 변수

# 서론

> SQL은 어떠한(what) 데이터를 요청하기 위한 언어이지, 어떻게(How) 데이터를 읽을지 표현하는 언어가 아님
> 

그렇기에 내부 동작 원리를 파악하고, 쿼리를 빠르게 돌리는 방법을 알아야됨

> MySQL 서버의 시스템 설정이 쿼리에 어떤 영향을 주는지 알아본다  
(대소문자 구분, 문자열 표기법 등 SQL 작성 규칙은 MySQL 서버의 시스템 설정에 달라짐)
> 

<Br>

# 11.1.1 SQL 모드

> `sql_mode` 시스템 설정에서 여러개 값을 `,` 를 구분자로 키워드 동시에 설정 가능함
> 


## sql_mode 시스템 변수

- 될 수 있으면 사용 중간에 변경 X, 초반에 작업할 것
- 하나의 복제 그룹에 속한 모든 mysql 서버는 같은 sql_mode 시스템 변수 유지하기

<Br>

- `STRICT_ALL_TABELS` & `STRICT_TRANS_TABLE`
    - **INSERT나 UPDATE시 입력한 데이터 타입이 다르면 자동으로 타입변경함**
    - 자동타입 변환이 어렵거나, 값이 없거나, 값의 길이가 컬럼 최대 길이 보다 긴 경우 Error
    - 해당 옵션은 MySQL 서버를 서비스에 적용하기 전에 **************************************************************반드시 활성화할 것을 권장함**************************************************************
    - `STRICT_ALL_TABELS` : 모든 스토리지 엔진에 Strict Mode 적용
    - `STRICT_TRANS_TABLE` : InnoDB와 같이 트랜잭션을 지원하는 스토리지 엔진에만 적용
- `ANSI_QUOTES`
    - MySQL은 `“`나 `‘`를 동시 사용 가능하고
    Oracle은 `‘`는 문자열 값, `“`는 칼럼명이나 테이블과 같은 식별자를 구분하는 용도
    - 옵션 활성화 시 Oracle처럼 **‘는 문자열 값에만, “는 식별자 용도로만** 사용가능함
- `PIPES_AS_CONCAT`
    - ||는 OR 연산자
    - 활성화시 Oracle처럼 **문자열 연결 연산자(CONCAT)**으로 사용함
- `PAD_CHAR_TO_FULL_LENGTH`
    - 본래 CHAR 타입이더라도 VARCHAR처럼 유효 문자열 뒤의 공백은 제거되어 반환함
    - 활성화 시 **CHAR 타입의 뒷 공백 제거되지 않고 반환함**
- `NO_BACKSLASH_ESCAPES`
    - 기존엔 **역슬레시를 이스케이프 문자로** 사용한데, 활성화시 **사용 못함**
- `IGNORE_SPACE`
    - MySQL은 스토어드 프로시저나 함수 이름 뒤에 공백 있으면 에러 출력됨 (공백까지 이름으로 인식하기 때문)
    - 옵션 활성화 시, **프로시저나 함수명과 괄호사이의 공백 무시함**
        - 해당 옵션은 **MySQL 서버 내장함수에만 적용**되며, 내장 함수는 **모두 예약어**로 간주됨
- `REAL_AS_FLOAT`
    - MySQL은 부동 소수점 타입은 FLOAT과 DOUBLE 모두 지원됨
        - 기존에는 REAL이 DOUBLE 타입의 동의어인데,
        활성화 시 **REAL은 FLOAT 타입의 동의어**로 간주됨
- `NO_ZERO_IN_DATE` & `NO_ZERO_DATE`
    - 두 옵션 모두 활성화 시, **DATE와 DATETIME 칼럼에 잘못된 날짜 저장하는 것이 불가능함**
- `ANSI`
    - 최대한 SQL 표준에 맞게 동작하도록 여러 옵션 **조합**한 것
    - 조합 목록
        - `REAL_AS_FLOAT`
        - `PIPES_AS_CONCAT`
        - `ANSI_QUOTES`
        - `IGNORE_SPACE`
        - `ONLY_FULL_GROUP_BY`
- `TRADITIONAL`
    - `STRICT_ALL_TABELS` & `STRICT_TRANS_TABLE` 와 비슷하지만 조금 **더 엄격한** 제어 방법
    - 조합 목록
        - `STRICT_ALL_TABELS` & `STRICT_TRANS_TABLE`
        - `NO_ZERO_IN_DATE` & `NO_ZERO_DATE`
        - `ERROR_FOR_DIVISION_BY_ZERO`
        - `NO_ENGINE_SUBSTITUTION`

<Br>

# 11.1.2 영문 대소문자 구분

설치된 운영체제에 따라 테이블명의 대소문자 구분함

- Windows: 구분 X, 유닉스 계열 : 구분 O

### 운영체제에 관계없이 대소문자 구분에 영향 받지 않게 하는 방법

`lower_case_table_names` 

- `1` : **모두 소문자** 저장 
→ MySQL서버는 대소문자 구분 안 하게 됨
- `0` (**기본값**) : **DB나 테이블명에서 구분함**
- `2` : 윈도우/MacOS에서 설정 가능. **저장은 대소문자 구분 but  쿼리에서는 구분 안 함**

⇒ 초기 DB나 테이블 생성 시에는 대문자or소문자만으로 통일하는게 좋음 

<Br>


# 11.1.3 MySQL 예약어

> 사용 안하는 것이 BEST
예약어를 사용하려면 ```나 `"`로 감싸야됨


### 예약어인지 확인 방법

“나 ` 사용하지 않고 직접 MYSQL에서 테이블 생성해보기 → 예약어면 에러 발생