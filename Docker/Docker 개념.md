# 🐳 도커란?
도커는 리눅스 컨테이너 여러 기능을 추가함으로써 애플리케이션을 컨테이너로서 좀 더 쉽게 사용할 수 있게 만들어진 오픈소스 프로젝트 이다.

- 가상화 방법인 가상 머신과 달리 도커 컨테이너는 성능 손실이 적다
- 일반적인 도커는 도커 엔진 혹은 도커와 관련된 모든 프로젝트를 의미함
- 도커 엔진은 컨테이너를 생성하고 관리하는 주체를 말한다. 

<br/><br/>

## 1.1 가상 머신과 도커 컨테이너

### 가상머신<hr>

#### 특징 
- 기존에는 하이퍼바이저를 이용해 여러개의 운영체제를 하나의 호스트에서 생성해 사용하는 방식이었음.  
    - 생성되는 운영체제는 <b>`'가상 머신'`</b> 단위로 구별됨
- 하이퍼바이저로 관리되는 운영체제를 <b>`'게스트 운영체제 (Guest OS)'`</b> 라고 하고, 이는 게스트 운영체제 각각은 완전히 독립된 공간과 시스템 자원을 할당 받음 

#### 단점 
- 가상화 작업은 하이퍼바이저를 반드시 거치기에, 일반 호스트에 비해 <b>`성능 손실 발생함`</b>
- 라이브러리, 커널등을 전부 포함하기에 <b>`이미지 크기가 크고`</b>, 특히 용량이 큰 가상 머신 이미지를 배포하기엔 부담스러움 

<br/>

### 도커 컨테이너 <hr>
- 리눅스 자체 기능인 chroot, namespace, cgroup을 사용하여 프로세스 단위의 격리된 공간 즉, 가상화된 공간을 만들기 때문에 <b>`성능 손실이 거의 없음`</b>

- 호스트의 커널을 공유해 사용하기 때문에 <b>`이미지 용량이 비교적 작고, 배포하는 시간이 빠름 `</b>


<br/><br/>

## 1.2 도커를 시작해야 하는 이유
도커는 컨테이너 생태계에서 사실상 표준으로서 사용되고 있음 

### 1. 애플리케이션의 개발과 배포가 편해짐
    - 도커 컨테이너틑 호스트 OS 위에서 실행되는 격리 공간이라, 독립된 개발 환경 보장 받을 수 있음
    - 배포 시 도커 이미지를 만들 수 있고, 컨테이너를 복제할 수 있어 개발/운영 환경의 통합이 가능함
    - 커널을 포함하고 있지 않아 이미지 크키가 크지 않아, 애플리케이션 배포 속도가 매우 빨라짐

### 2. 여러 애플리케이션의 독립성과 확장성 높아짐  
    - 마이크로서비스 구조에서 컨테이너를 이용하여 수 초 내로 생성, 시작이 가능하고, 각 모듈별로 독립된 환경을 제공할 있다.  
    - 특정 컨테이너만 동적으로 늘려 부하 분산 가능함
    - 이미지 버전을 독립적으로 관리하기에 유지보수도 용이함 
    - 컨테이너 기반의 마이크로서비스는 주로 도커 스웜 모드, 쿠버네티스 등의 컨테이너 오케스트레이션 플랫폼을 이용해 사용함

<br/>
cf. 모놀리스 애플리케이션 : 소프트웨어의 여러 모듈이 상호 작용하는 로직을 하나의 프로그램에서 구동시키는 
방식 / 서비스 기능 복잡해지고 거대해질수록 소프트웨어 자체의 확정성과 유연성이 줄어듦
<br/>
마이크로 서비스 : 여러 모듈을 독립된 형태로 구성하여 언어에 종속되지 않고 변화에 빠르게 대응할 수 있고, 각 모듈의 관리가 쉬워짐

<br/><br/>


# 🚂 도커 엔진
도커 엔진에서 사용하는 기본 단위는 이미지와 컨테이너이고, 이 두 가지가 도커 엔진의 핵심이다. 

### 도커 이미지 
- 이미지는 <b>컨테이너를 생성할 때 필요한 요소</b>
- 이미지는 <b>여러 개의 계층으로 된 바이너리 파일</b>로 존재하고, <b>컨테이너를 생성/실행할 때는 읽기 전용</b>으로 사용됨 
- 이미지는 도커 명령어로 내려받을 수 있음
- 이미지 이름 형식 : `[저장소이름]/[이미지이름]:[태그]`

<br/>

### 도커 컨테이너 
- 이미지로 컨테이너를 생성하면 해당 이미지의 목적에 맞는 파일이 들어 있는 파일시스템과 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립된 공간 생성됨
- 컨테이너는 이미지를 읽기 전용으로 사용하되 이미지에서 변경된 사항만 컨테이너 계층에 저장하므로, <b>컨테이너 동작이 원래 이미지에 영향을 주지 않음</b>
- 생성된 컨테이너는 <b>독립된 파일시스템을 제공받고 호스트와 분리되어 있음</b>