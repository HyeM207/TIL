# Kafka 컴포넌트 (3) - Kafka Connect
책 '아파치 카프카 애플리케이션 프로그래밍 with 자바 - 최원영 지음'을 공부하며 정리하였습니다.   

<br>

# 1. 카프카 커넥트
카프카 커넥트(kafka connect)는 카프카 오픈소스에 포함된 툴 중 하나로 데이터 파이프라인 생성 시 반복 작업을 줄이고 효율적인 전송을 이루기 위한 애플리케이션이다.  
- 커넥트는 특정 작업 형태를 템플릿으로 만들어놓은 `커넥터(connector)`를 실행함으로써 반복 작업을 줄일 수 있다.
- 커넥터는 각 커넥터가 가진 고유한 설정값을 입력받아서 데이터를 처리한다. 

<br>

## 2.1  커넥터 종류

1. `소스 커텍터` : 프로듀서 역할   
2. `싱크 커넥터` : 컨슈머 역할 

예를 들어, 파일 소스 커넥터는 파일의 데이터를 카프카 토픽으로 전송하는 프로듀서 역할을하고 파일 싱크 커넥터는 토픽의 데이터를 파일로 저장하는 컨슈머 역할을 한다.

파일 외에도 MYSQL, S3, MongoDB, MySQL 에서 카프카로 데이터를 보낼 때 그리고 카프카에서 데이터를 MySQL로 저장할 때 JDBC 커넥터를 사용하여 파이프라인을 생성할 수 있다.    

<br>

## 2.2 커넥터 오픈소스

커넥터를 기본으로 제공하는 것도 있고, 플러그인 형태로 커넥터 jar 파일을 추가하는 경우 혹은 직접 커넥터 플러그인을 만들거나 인터넷 상에 존재하는 커넥터 플러그인을 가져다 쓸 수도 있다.   

오픈소스 커넥터는 직접 커넥터를 만들 필요 없으며, 커넥터 jar 파일을 다운로드하여 사용할 수 있다는 장점이 있다. HDFS 커넥터, AWS S3 커넥터, 엘라스틱서치 커넥터 등 100개가 넘는 커넥터들이 공개되어 있다.

<br>

## 2.3 커넥터 실행과 옵션
### (1) 커넥터/태스크와 추가 옵션
사용자가 커넥트에 커넥터 생성 명령을 내리면, 커넥트 내부에 `커넥터`와 `태스트`를 생성한다.  
`태스크`는 커넥터에 종속되는 개념으로 실질적인 데이터 처리를 한다.
p.156

사용자가 커넥터를 사용하여 파이프라인을 생성할 때, `컨버터(converter)`와 `트랜스폼(transform)`기능을 옵션으로 추가할 수 있다. (선택 옵션)

- `컨버터` : 데이터 처리를 하기 전에 스키마를 변경하도록 도와준다.
    - JsonConverter, String Converter, ByteArrayConverter를 지원하고 필요하다면 커스텀 컨버터를 작성하여 사용할 수도 있다.
- `트랜스폼` : 데이터 처리 시 각 메시지 단위로 데이터를 간단하게 변환하기 위한 용도로 사용됨
    - JSON 데이터를 커넥터에서 사용할 때 트랜스폼을 사용하면 특정 키를 삭제하거나 추가할 수 있다. (기본 제공 트랜스폼으로는 Cast, Drop, ExtractField등이 있다.)

<br>

### (2) 커넥트 실행 방법
커넥트를 실행하는 방법은 크게 두 가지 있다.
1. `단일 모드 커넥트(standalone mode kafka conne/)
