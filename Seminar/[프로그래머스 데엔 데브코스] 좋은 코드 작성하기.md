# [특강] 좋은 코드를 작성하려면?
> 프로그래머스 데이터 엔지니어 1기 - 좋은 코드 작성하기 특강 내용 요약
> 일자 : 2023.04.20

<br><br>

# 📌 [1] 깔끔하고 읽기 쉬운 코드 작성하기
- **많이 코딩**해보면서 고민하고 **코드 리뷰** 받기가 핵심
    - 팀에 시니어가 없다면 **오픈 소스 코드 보기**
    - 이력서 오픈 소스 한 줄 바꾸는게 아주 좋음

<br>

## #️⃣ 생산성 툴 익히기
- Git & Github
- 소스코드 에디터 → VSCode 단축키
    - 플러그인으로 많이 해보기
        - copilot 등

## #️⃣ 좋은 코드
- **읽기 쉽고, 이해 쉽고, 수정하기 쉽고**
    - 짧다고 좋은게 아님
    - 명확한 이름 , 형식, 주석 등
- 모든 코드는 **테스트가** 가능해야 하며 코드와 함께 **유닛 테스트 작성해야됨**
- 클래스와 **함수는 하나의 일**을 하도록 구현
- 코드는 모듈화하여 **중복을 피해야함**
- **에러처리 잘하고 로깅 처리 잘 하기**
- 코드는 작성자가 아닌 사용자를 염두해서 설계해야 함
- 단 중요한 일에 더 완벽하게 하기

<br>

## #️⃣ 코드 작성 원칙 
### ✅ **DRY** : 중복 코드 안되게 하기(함수나 루프로 반복 없애기)

- COPY하고 PASTE하고 있으면 그게 SIGNAL
- PYTHON은 멀티라인 주석으로 설명, PARAM, RETURNS를 작성함

### ✅**KISS** : 함수나 클라스를 하나의 일만 하도록
- 심플하도록. 함수가 하나의 기능으로
    - 한 함수가 넘 길어지면 다수의 함수로 나누기
    - lambda 함수는 팀과 개인에 따라 달라지므로 과도하게 사용하지 말기
    - 있는 함수를 굳이 만들지 말기

(추가 내용: test Coverage의 중요성)
<br>

## #️⃣ 좋은 코드
- 일관된 원칙
- **구글의 파이썬 스타일링 가이드** 읽어보기
    - 같이 개발하는 사람들과 일관성을 갖기

<br>

## #️⃣이름 명명 규칙
- 클라스나 exception은 camelcase로 쓰기
- 모듈이나 package, method의 경우는 _로 하기
- 상수는 다 대문자와 _로
- 내부 모듈이나 상수는 앞에 _를 넣기 

[ 예외 ]
- **single character names 를 쓰는 경우**
    - 카운터 i,j, 예외 e
- 대쉬 말고 `_` 쓰기
- `__` 두개로 되어 있는건 파이썬 예약어임
- **변수를 통해서 기능을 알 수 있으면 굳이 이름에 타입을 안 적어도 됨**

<br>

## #️⃣ 변수 이름 예제
- is_ 는 불린 타입
- num_ 개수(카운트)는

<br>

## #️⃣ Tips! chatGPT에게 물어보기
Google python styling guide에 따라 변수명 지을거라고 같이 말하기 

<br>

## #️⃣ 적절한 주석 및 문서화
- 의미 없는 주석은 달지 않기
- 만약 +1이 의미가 있는 거면 1에 대한 설명과, 왜 붙이는지 주석을 붙여야함
- **google style pytthon docstrings** 참고하기 
- 함수 보면 파라미터 데이터 타입과 return 타입을 지정 가능함

<br>

## #️⃣ 유용한 파이썬 함수
- Generator 함수
- List Comprehensive 
- Lambda 함수

<br><br>

# 📌 코드 리뷰
## #️⃣좋은 코드 리뷰 방법
- 코드 리뷰 요청하는 사람
    - 조금씩 자주 요청 **with unit test**
    - 코드 리뷰 시 감정적 X
- 코드 리뷰 하는 사람
    - 코드 자체에 대해 이야기
    - 최대한 객관적, 비판 X
        - 더 좋은 방법은 추천해주고 그 이유를 잘 설명해주기
    - 도움이 되는 리뷰
    - 동료들의 코드를 리뷰해주는게 좋음
    - Github로 리뷰하기
<br>

## #️⃣ 구글 코드 리뷰 사례
- 남의 코드를 바꾸는 거면 그 사람의 스타일 따라가도록
- 큰 코드로 리뷰하지 말고 small change로 코드 리뷰 요청할 것!
- Readability가 가장 중요

### ✅ 예시 코드 리뷰
[ 예시 1 ]
- 함수를 ‘’’ 주석 붙여서 설명하기
- 변수명 수정 : numbers 대신 list_of_numbers
- 함수 불필요함 : 함수를 왜 만들었냐 numpy.mean을 써라
- 에러 처리 필요 :
    - numbers의 len이 0이면 에러남, 그리고 리스트 타입이 아니면 에러남

[ 예시 2 ]
1. 함수안에서 true와 false에 대해서 로직을 다르게 하는게 dry and kiss 원칙 벗어남  ⇒ 함수를 2개로 나누기 그리고 그것에 맞게 피드백 추기 
2. 자체 에러를 만들기

<br><br>

# 📌테스트
## #️⃣ 테스트 종류
- `unit test` : 모듈함수 테스트
    - 의도한 입력에 상응하는 답이 나온거
- `integration test` : 더 상위 테스트
- `acceptance test`  : 부하 테스트
- `UI Test` : selenium 써서 ui 기능 테스트

> 코드를 추가하거나 수정을 했을 때는 unit test를 함

> 배포할 때는 그 아래 3가지 테스트를 수행함

<br>

## #️⃣ 테스트의 중요성

- 테스트 많으면 안정성 증대
- refactoring 수정시 매우 편함
- 파이썬은 static 코드 분석이 가능해서 실행 가능한 경로중에 몇 퍼센트를 테스트가 커버하고 있는지 알 수 잇음 => `unittest`모듈

<br>

## #️⃣ 파이썬 unittest 모듈 설치
- `import unittest`
- 실행 명령어 : `python3 -m unittest test.py`
- test.py 구성
    - 만든 파일을 import 하고
    - 클래스를 만들고
        - 함수를 넣는다.
        - 테스트 할 인자값 넣어주고, 결과값을 assertEqual()함수로 같은지 확인해보기
    - 위에 코드로 보면 2개의 함수가 테스트 됨
    - 파일명은 test_avg.py로 구체적으로 적어둘것
- `assertEqual(a,b)`, `assertTrue(a)`, `assertRaises` 등으로 테스트 성공 여부 결정함